---
title: "How to use Evitlas"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{How_to_use_Evitlas}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
conflictRules("tidyr", mask.ok = c("extract"))
conflictRules("dplyr", mask.ok = c("filter", "lag", "select"))
pacman::p_load(devtools,dplyr,tidyverse)
```

```{r}
metadata <- read_csv(here::here("inst","extdata","metadata.csv")) %>% filter(!is.na(Longitude))
bounds <- read_rds(here::here("inst","extdata","wb_bounds.rds")) 

#get the centroid of those countries
bounds$geom_valid <- st_is_valid(bounds)

##show list of countries with invalid geometries
bounds <- bounds %>% filter(geom_valid=="TRUE") 
table(bounds$geom_valid)

ref_data <- read_rds(here::here("inst","extdata","wb_bounds_stats.rds")) %>%
  filter(!is.na(value))
usethis::use_data(metadata, bounds, ref_data, overwrite=TRUE)
```
